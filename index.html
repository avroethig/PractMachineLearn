<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Practmachinelearn by avroethig</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Practmachinelearn</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/avroethig/PractMachineLearn" class="btn">View on GitHub</a>
      <a href="https://github.com/avroethig/PractMachineLearn/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/avroethig/PractMachineLearn/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <hr>

<p>title: "Practical Machine Learning - Course Project"
author: "A RÃ¶thig"
date: "27 September 2015"</p>

<h2>
<a id="output-html_document" class="anchor" href="#output-html_document" aria-hidden="true"><span class="octicon octicon-link"></span></a>output: html_document</h2>

<h2>
<a id="summary" class="anchor" href="#summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary</h2>

<p>The following report presents a machine learning algorithm for classifying the activity quality of some Unilateral Dumbbell Biceps Curl exercises from some activity monitors recorded in the given dataset presented in [Ugulino, W. et.all (2012)].   </p>

<h2>
<a id="dataset-description" class="anchor" href="#dataset-description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dataset description</h2>

<p>The quality of the exercise is quantified in five different fashions: exactly according to the specification (Class A), throwing the elbows to the front (Class B), lifting the dumbbell only halfway (Class C), lowering the dumbbell only halfway (Class D) and throwing the hips to the front (Class E). The set contains the sensor data from four sensors positioned in different places on the body of the participant and on the dumbell. The positions are belt, forearm, arm and dumbell. The variables of the dataset are features on the roll, pitch and yaw angles over a period of time, and the raw accelerometer, gyroscope and magnetometer readings. Features on the Euler angles are mean, variance,
standard deviation, max, min, amplitude, kurtosis and skewness. There were six participants that were asked to perform one set of 10 repetitions of the Unilateral Dumbbell Biceps Curl in the five different fashions.</p>

<h2>
<a id="loading-the-data" class="anchor" href="#loading-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Loading the data</h2>

<p>The follwing code chunk downloads the data and loads it in two data frames.</p>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># download the data</span>
<span class="pl-k">if</span> (<span class="pl-k">!</span>file.exists(<span class="pl-s"><span class="pl-pds">"</span>pml-training.csv<span class="pl-pds">"</span></span>))
{
  <span class="pl-smi">train_url</span> <span class="pl-k">&lt;-</span> <span class="pl-s"><span class="pl-pds">"</span>https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv<span class="pl-pds">"</span></span> 
  download.file(<span class="pl-smi">train_url</span>,<span class="pl-v">destfile</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>pml-training.csv<span class="pl-pds">"</span></span>)  
}

<span class="pl-k">if</span> (<span class="pl-k">!</span>file.exists(<span class="pl-s"><span class="pl-pds">"</span>pml-testing.csv<span class="pl-pds">"</span></span>))
{
  <span class="pl-smi">test_url</span> <span class="pl-k">&lt;-</span> <span class="pl-s"><span class="pl-pds">"</span>https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv<span class="pl-pds">"</span></span>
  download.file(<span class="pl-smi">test_url</span>,<span class="pl-v">destfile</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>pml-testing.csv<span class="pl-pds">"</span></span>)  
}

<span class="pl-c"># load the data</span>
<span class="pl-smi">DF_train</span> <span class="pl-k">&lt;-</span> read.csv(<span class="pl-s"><span class="pl-pds">"</span>pml-training.csv<span class="pl-pds">"</span></span>)
<span class="pl-smi">DF_test</span> <span class="pl-k">&lt;-</span> read.csv(<span class="pl-s"><span class="pl-pds">"</span>pml-testing.csv<span class="pl-pds">"</span></span>)

<span class="pl-c"># load packages</span>
require(<span class="pl-smi">caret</span>)
require(<span class="pl-smi">ggplot2</span>)
require(<span class="pl-smi">rattle</span>)
require(<span class="pl-smi">rpart</span>)
require(<span class="pl-smi">dplyr</span>)</pre></div>

<h2>
<a id="data-processing" class="anchor" href="#data-processing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data processing</h2>

<p>The following steps were taken in processing the data:</p>

<ol>
<li>Variables with zero-variance were taken out from the list of possible predictors.</li>
</ol>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># check and throw out all variables with no variability</span>
<span class="pl-smi">nsv</span> <span class="pl-k">&lt;-</span> nearZeroVar(<span class="pl-smi">DF_train</span>,<span class="pl-v">saveMetrics</span><span class="pl-k">=</span><span class="pl-c1">T</span>)
<span class="pl-smi">DF_train_subcol</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">DF_train</span>[rownames(<span class="pl-smi">nsv</span>[<span class="pl-smi">nsv</span><span class="pl-k">$</span><span class="pl-smi">nzv</span> <span class="pl-k">==</span> <span class="pl-c1">F</span>,])]</pre></div>

<ol>
<li>Factor variables containing the subject identification and time variables were also taken out from the list of possible predictors.</li>
</ol>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># take out the non-predictors (user_name)</span>
<span class="pl-smi">DF_train_subcol.pred</span> <span class="pl-k">&lt;-</span> select(<span class="pl-smi">DF_train_subcol</span>,<span class="pl-k">-</span>c(<span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-c1">6</span>))</pre></div>

<ol>
<li>From the 94 remaining (numeric) variables, the ones with many NA's were also taken out from the list of possible predictors.</li>
</ol>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># take variables with not so many na's</span>
<span class="pl-smi">pct_na</span> <span class="pl-k">&lt;-</span> unlist(lapply(<span class="pl-smi">DF_train_subcol.pred</span>, <span class="pl-k">function</span>(<span class="pl-smi">x</span>) mean(is.na(<span class="pl-smi">x</span>))))
<span class="pl-smi">DF_train_subcol.pred.clean</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">DF_train_subcol.pred</span>[,names(which(<span class="pl-smi">pct_na</span> <span class="pl-k">&lt;</span><span class="pl-k">=</span> .<span class="pl-c1">1</span>))]</pre></div>

<ol>
<li>The variables with a pair-wise correlation (absolute value) higher than .75 were computed, and the each time, the one with the largest mean absolute correlation was removed.</li>
</ol>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># find correlated variables</span>
<span class="pl-smi">descrCor</span> <span class="pl-k">&lt;-</span>  cor(<span class="pl-smi">DF_train_subcol.pred.clean</span>[,<span class="pl-k">-</span><span class="pl-c1">53</span>],<span class="pl-v">use</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>complete.obs<span class="pl-pds">"</span></span>)
summary(<span class="pl-smi">descrCor</span>[upper.tri(<span class="pl-smi">descrCor</span>)])
<span class="pl-c"># take variables with max .75 correlation</span>
<span class="pl-smi">highlyCorDescr</span> <span class="pl-k">&lt;-</span> findCorrelation(<span class="pl-smi">descrCor</span>, <span class="pl-v">cutoff</span> <span class="pl-k">=</span> .<span class="pl-c1">75</span>)
<span class="pl-smi">DF_train_subcol.pred.clean</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">DF_train_subcol.pred.clean</span>[,<span class="pl-k">-</span><span class="pl-smi">highlyCorDescr</span>]

<span class="pl-c"># check</span>
<span class="pl-smi">lastcol</span> <span class="pl-k">&lt;-</span> ncol(<span class="pl-smi">DF_train_subcol.pred.clean</span>)
<span class="pl-smi">descrCor2</span> <span class="pl-k">&lt;-</span> cor(<span class="pl-smi">DF_train_subcol.pred.clean</span>[,<span class="pl-k">-</span><span class="pl-smi">lastcol</span>])
summary(<span class="pl-smi">descrCor2</span>[upper.tri(<span class="pl-smi">descrCor2</span>)])</pre></div>

<ol>
<li>Splitting the data in a training and testing set.</li>
</ol>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># split the given data in training and splitting data to avoid overfitting</span>
<span class="pl-smi">inTrain</span>  <span class="pl-k">&lt;-</span> createDataPartition(<span class="pl-v">y</span><span class="pl-k">=</span><span class="pl-smi">DF_train_subcol.pred.clean</span><span class="pl-k">$</span><span class="pl-smi">classe</span>, <span class="pl-v">p</span><span class="pl-k">=</span> .<span class="pl-c1">75</span>, <span class="pl-v">list</span> <span class="pl-k">=</span> <span class="pl-c1">F</span>)
<span class="pl-smi">training</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">DF_train_subcol.pred.clean</span>[ <span class="pl-smi">inTrain</span>,]
<span class="pl-smi">testing</span>  <span class="pl-k">&lt;-</span> <span class="pl-smi">DF_train_subcol.pred.clean</span>[<span class="pl-k">-</span><span class="pl-smi">inTrain</span>,]</pre></div>

<h2>
<a id="training-the-model" class="anchor" href="#training-the-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Training the model</h2>

<p>The used method is Random Forest with (two times) repeated Cross-Validation.</p>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># training</span>
<span class="pl-smi">train_control</span> <span class="pl-k">&lt;-</span> trainControl(<span class="pl-v">method</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>repeatedcv<span class="pl-pds">"</span></span>, 
                                <span class="pl-v">number</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>, <span class="pl-v">repeats</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>,<span class="pl-v">allowParallel</span> <span class="pl-k">=</span> <span class="pl-c1">T</span>)

<span class="pl-c"># train the model </span>
<span class="pl-smi">modFit</span> <span class="pl-k">&lt;-</span> train(<span class="pl-smi">classe</span> <span class="pl-k">~</span> ., <span class="pl-v">data</span><span class="pl-k">=</span><span class="pl-smi">training</span>, 
               <span class="pl-v">method</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>rf<span class="pl-pds">"</span></span>, <span class="pl-v">trControl</span><span class="pl-k">=</span><span class="pl-smi">train_control</span>)

<span class="pl-c"># print results</span>
print(<span class="pl-smi">modFit</span><span class="pl-k">$</span><span class="pl-smi">finalModel</span>)
<span class="pl-smi">modFit</span></pre></div>

<h2>
<a id="results" class="anchor" href="#results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Results</h2>

<p>The classification results on the test data set are given in the following code chunk.</p>

<div class="highlight highlight-source-r"><pre>require(<span class="pl-smi">caret</span>)
<span class="pl-k">if</span> (file.exists(<span class="pl-s"><span class="pl-pds">'</span>environm.RData<span class="pl-pds">'</span></span>)) load(<span class="pl-s"><span class="pl-pds">'</span>environm.RData<span class="pl-pds">'</span></span>)
<span class="pl-smi">predictions</span> <span class="pl-k">&lt;-</span> predict(<span class="pl-smi">modFit</span>, <span class="pl-v">newdata</span> <span class="pl-k">=</span> <span class="pl-smi">testing</span>)
</pre></div>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># make predictions</span>
<span class="pl-smi">predictions</span> <span class="pl-k">&lt;-</span> predict(<span class="pl-smi">modFit</span>, <span class="pl-v">newdata</span> <span class="pl-k">=</span> <span class="pl-smi">testing</span>)
<span class="pl-c"># summarize results</span>
print(confusionMatrix(<span class="pl-smi">predictions</span>,<span class="pl-smi">testing</span><span class="pl-k">$</span><span class="pl-smi">classe</span>))</pre></div>

<h3>
<a id="expected-out-of-sample-error" class="anchor" href="#expected-out-of-sample-error" aria-hidden="true"><span class="octicon octicon-link"></span></a>Expected out-of-sample error</h3>

<p>An estimate of the out-of-sample error rate can be given as the proportion of misclassified instances to the total number of instances. This is equal to 1 - Accuracy, given by the code chunk above. Thus, the estimate is 0.0075. Since the training algorithmus applied the repeated Cross-Validation method, the estimate 0.0075 is an estimate of the averaged out-of-sample error rate from each of the two repetitions (repeats = 2).</p>

<h2>
<a id="literature" class="anchor" href="#literature" aria-hidden="true"><span class="octicon octicon-link"></span></a>Literature</h2>

<p>Ugulino, W.; Cardador, D.; Vega, K.; Velloso, E.; Milidiu, R.; Fuks, H. Wearable Computing: Accelerometers' Data Classification of Body Postures and Movements. Proceedings of 21st Brazilian Symposium on Artificial Intelligence. Advances in Artificial Intelligence - SBIA 2012. In: Lecture Notes in Computer Science. , pp. 52-61. Curitiba, PR: Springer Berlin / Heidelberg, 2012. ISBN 978-3-642-34458-9. DOI: 10.1007/978-3-642-34459-6_6.</p>

<p>Read more: <a href="http://groupware.les.inf.puc-rio.br/har#ixzz3mvKimgZw">http://groupware.les.inf.puc-rio.br/har#ixzz3mvKimgZw</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/avroethig/PractMachineLearn">Practmachinelearn</a> is maintained by <a href="https://github.com/avroethig">avroethig</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
